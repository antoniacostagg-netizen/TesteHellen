<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moda Fitness - Catálogo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== ESTILOS GERAIS - ÁREA EDITÁVEL PARA PERSONALIZAÇÃO VISUAL ===== */
        :root {
            --cor-primaria: #c84ea1;       /* ALTERE: Cor principal do site */
            --cor-secundaria: #ffffff;     /* ALTERE: Cor secundária do site */
            --cor-destaque: #4CAF50;       /* ALTERE: Cor para botões de ação */
            --cor-texto: #333;             /* ALTERE: Cor do texto principal */
            --cor-fundo: #f8f9fa;          /* ALTERE: Cor de fundo do site */
            --sombra: 0 4px 8px rgba(0,0,0,0.1); /* ALTERE: Sombra dos elementos */
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            line-height: 1.6;
            padding-bottom: 80px; /* Espaço para o botão flutuante */
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(135deg, var(--cor-primaria), var(--cor-secundaria));
            color: white;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: var(--sombra);
        }
        
        h1, h2, h3 {
            margin-bottom: 15px;
        }
        
        /* ===== BOTÕES DE FILTRO ===== */
        .filtros {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .btn-filtro {
            padding: 12px 20px;
            background-color: white;
            border: 2px solid var(--cor-primaria);
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-filtro:hover {
            background-color: var(--cor-primaria);
            color: white;
        }
        
        .btn-filtro.ativo {
            background-color: var(--cor-primaria);
            color: white;
        }
        
        /* ===== ESTILOS DO CATÁLOGO ===== */
        .catalogo {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .produto {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--sombra);
            transition: transform 0.3s ease;
        }
        
        .produto:hover {
            transform: translateY(-5px);
        }
        
        .produto-imagens {
            position: relative;
            height: 200px;
            overflow: hidden;
        }
        
        .produto-imagem {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }
        
        .produto-miniaturas {
            display: flex;
            justify-content: center;
            padding: 10px;
            gap: 5px;
            flex-wrap: wrap;
        }
        
        .miniatura {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .miniatura.ativa {
            border-color: var(--cor-primaria);
        }
        
        .produto-info {
            padding: 15px;
        }
        
        .produto-titulo {
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .produto-preco {
            font-weight: bold;
            color: var(--cor-primaria);
            margin-bottom: 15px;
        }
        
        .produto-cores {
            margin-bottom: 15px;
        }
        
        .cores-opcoes {
            display: flex;
            gap: 8px;
            margin-top: 5px;
            flex-wrap: wrap;
        }
        
        .cor-opcao {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .cor-opcao.selecionada {
            border-color: #000;
        }
        
        .quantidade-controle {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .quantidade-btn {
            width: 30px;
            height: 30px;
            background-color: var(--cor-primaria);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .quantidade-input {
            width: 40px;
            height: 30px;
            text-align: center;
            margin: 0 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .adicionar-carrinho {
            width: 100%;
            padding: 10px;
            background-color: var(--cor-primaria);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .adicionar-carrinho:hover {
            background-color: var(--cor-secundaria);
        }
        
        .adicionar-carrinho:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        /* ===== ESTILOS DO CARRINHO ===== */
        .carrinho {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--sombra);
            margin-bottom: 30px;
        }
        
        .carrinho-itens {
            margin-bottom: 20px;
        }
        
        .carrinho-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .carrinho-total {
            font-size: 20px;
            font-weight: bold;
            text-align: right;
            margin-top: 15px;
        }
        
        /* ===== ESTILOS DO FORMULÁRIO ===== */
        .formulario {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--sombra);
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .btn-finalizar {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: var(--cor-destaque);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            margin-top: 20px;
        }
        
        .btn-finalizar:hover {
            opacity: 0.9;
        }
        
        /* ===== BOTÃO FLUTUANTE FINALIZAR COMPRA ===== */
        .btn-flutuante {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--cor-destaque);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
            cursor: pointer;
            z-index: 1000;
            transition: transform 0.3s ease;
        }
        
        .btn-flutuante:hover {
            transform: scale(1.05);
        }
        
        .badge-carrinho {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--cor-secundaria);
            color: red;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        /* ===== MENSAGENS DE ALERTA ===== */
        .alerta {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }
        
        .alerta.erro {
            background-color: #ffebee;
            color: #f44336;
            border: 1px solid #f44336;
        }
        
        .alerta.sucesso {
            background-color: #e8f5e9;
            color: #4caf50;
            border: 1px solid #4caf50;
        }
        
        /* ===== ETAPAS DO CHECKOUT ===== */
        .etapa {
            display: none;
        }
        
        .etapa.ativa {
            display: block;
        }
        
        /* ===== NAVEGAÇÃO DO CARRINHO ===== */
        .navegacao-carrinho {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .btn-voltar {
            background-color: #6c757d;
        }
        
        /* ===== RESPONSIVIDADE ===== */
        @media (max-width: 768px) {
            .catalogo {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .produto-imagens {
                height: 150px;
            }
            
            .container {
                width: 95%;
                padding: 10px;
            }
            
            .carrinho-item {
                flex-direction: column;
            }
            
            .filtros {
                gap: 5px;
            }
            
            .btn-filtro {
                padding: 10px 15px;
                font-size: 14px;
            }
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: #666;
        }
        
        .carregando {
            text-align: center;
            padding: 20px;
            font-size: 18px;
            color: var(--cor-primaria);
        }
        
        /* ===== ESTILOS DA LOGO ===== */
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .logo-imagem {
            max-height: 80px;
            max-width: 200px;
        }
        
        .logo-texto {
            font-size: 2rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .logo-slogan {
            font-size: 1.1rem;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <!-- ALTERE AQUI: Coloque a URL da sua logo -->
                <img src="https://i.postimg.cc/QCrVHH8G/logo-hellen.png" alt="Moda Fitness" class="logo-imagem">
                <p class="logo-slogan">As melhores roupas para seus treinos</p>
            </div>
        </header>
        
        <!-- Botões de Filtro por Categoria -->
        <div class="filtros">
            <button class="btn-filtro ativo" onclick="filtrarProdutos('todos')">Todos</button>
            <button class="btn-filtro" onclick="filtrarProdutos('conjunto')">Conjuntos</button>
            <button class="btn-filtro" onclick="filtrarProdutos('top')">Tops</button>
            <button class="btn-filtro" onclick="filtrarProdutos('calca')">Macaquinhos</button>
            <button class="btn-filtro" onclick="filtrarProdutos('short')">Shorts</button>
        </div>
        
        <!-- Área para mensagens de alerta -->
        <div id="alerta" class="alerta"></div>
        
        <!-- Etapa 1: Catálogo de Produtos -->
        <section id="etapa-catalogo" class="etapa ativa">
            <h2>Nossos Produtos</h2>
            <div id="catalogo" class="catalogo">
                <!-- Os produtos serão inseridos aqui via JavaScript -->
            </div>
        </section>
        
        <!-- Etapa 2: Carrinho de Compras -->
        <section id="etapa-carrinho" class="etapa">
            <h2>Seu Pedido</h2>
            <div class="carrinho">
                <div id="carrinho-itens" class="carrinho-itens">
                    <!-- Itens do carrinho serão inseridos aqui -->
                    <p class="carrinho-vazio">Seu carrinho está vazio</p>
                </div>
                <div class="carrinho-total">
                    Total: R$ <span id="carrinho-total">0,00</span>
                </div>
            </div>
            
            <h2>Dados para Entrega</h2>
            <div class="formulario">
                <form id="form-cliente">
                    <div class="form-group">
                        <label for="nome">Nome Completo *</label>
                        <input type="text" id="nome" name="nome" required>
                    </div>
                    <div class="form-group">
                        <label for="telefone">Telefone *</label>
                        <input type="tel" id="telefone" name="telefone" required>
                    </div>
                    <div class="form-group">
                        <label for="email">E-mail *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="cep">CEP *</label>
                        <input type="text" id="cep" name="cep" required>
                    </div>
                    <div class="form-group">
                        <label for="endereco">Endereço *</label>
                        <input type="text" id="endereco" name="endereco" required>
                    </div>
                    <div class="form-group">
                        <label for="pagamento">Forma de Pagamento *</label>
                        <select id="pagamento" name="pagamento" required>
                            <option value="">Selecione...</option>
                            <option value="pix">PIX</option>
                            <option value="cartao-credito">Cartão de Crédito</option>
                            <option value="cartao-debito">Cartão de Débito</option>
                            <option value="dinheiro">Dinheiro</option>
                        </select>
                    </div>
                    <div class="navegacao-carrinho">
                        <button type="button" class="btn-finalizar btn-voltar" onclick="voltarParaCatalogo()">
                            <i class="fas fa-arrow-left"></i> Voltar às Compras
                        </button>
                        <button type="submit" class="btn-finalizar">
                            Enviar Pedido via WhatsApp <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </form>
            </div>
        </section>
        
        <!-- Botão Flutuante Finalizar Compra -->
        <div class="btn-flutuante" onclick="irParaCarrinho()">
            <i class="fas fa-shopping-bag"></i>
            <span class="badge-carrinho" id="badge-carrinho">0</span>
        </div>
        
        <footer>
            <p>&copy; 2023 Moda Fitness - Todos os direitos reservados</p>
        </footer>
    </div>

    <script>
        // ===================================================================
        // CONFIGURAÇÕES EDITÁVEIS - ALTERE ESTAS VARIÁVEIS PARA CADA CLIENTE
        // ===================================================================
        
        // ALTERE: Mensagem padrão para WhatsApp - PODE SER EDITADA PARA CADA CLIENTE
        const mensagemWhatsApp = `Olá, gostaria de fazer um pedido:
        
Nome: {nome}
Telefone: {telefone}
E-mail: {email}
Endereço: {endereco}
Forma de Pagamento: {pagamento}

Itens: 
{itens}
Total: R$ {total}

Aguardo informações para finalizar o pagamento.`;
        
        // ALTERE: Número de WhatsApp para envio das mensagens
        const whatsappNumber = "5585989408154";
        
        // ALTERE: Produtos para o protótipo (links de imagens de exemplo)
        // NO FUTURO: Será substituído pelo sistema de JSON automático
        const produtos = [
            {
                id: 1,
                nome: "Conjunto Fitness Premium",
                preco: 149.90,
                categoria: "conjunto",
                cores: [
                    { id: "preto", nome: "Preto", codigo: "#000000" },
                    { id: "azul", nome: "Azul", codigo: "#3a86ff" },
                    { id: "rosa", nome: "Rosa", codigo: "#ff006e" }
                ],
                imagens: [
                    "https://i.postimg.cc/qvvyx0qK/Hllenteste1.jpg",
                    "https://placehold.co/300x300/ff006e/ffffff?text=Conjunto+2",
                    "https://placehold.co/300x300/38b000/ffffff?text=Conjunto+3"
                ],
                estoque: 15
            },
            {
                id: 2,
                nome: "Top Fitness Esportivo",
                preco: 69.90,
                categoria: "top",
                cores: [
                    { id: "preto", nome: "Preto", codigo: "#000000" },
                    { id: "vermelho", nome: "Vermelho", codigo: "#d90429" },
                    { id: "roxo", nome: "Roxo", codigo: "#7209b7" }
                ],
                imagens: [
                    "https://placehold.co/300x300/7209b7/ffffff?text=Top+1",
                    "https://placehold.co/300x300/d90429/ffffff?text=Top+2"
                ],
                estoque: 20
            },
            {
                id: 3,
                nome: "Short Fitness",
                preco: 79.90,
                categoria: "short",
                cores: [
                    { id: "preto", nome: "Preto", codigo: "#000000" },
                    { id: "verde", nome: "Verde", codigo: "#38b000" },
                    { id: "cinza", nome: "Cinza", codigo: "#6c757d" }
                ],
                imagens: [
                    "https://placehold.co/300x300/38b000/ffffff?text=Short+1",
                    "https://placehold.co/300x300/6c757d/ffffff?text=Short+2"
                ],
                estoque: 18
            },
            {
                id: 4,
                nome: "Legging Fitness",
                preco: 99.90,
                categoria: "calca",
                cores: [
                    { id: "preto", nome: "Preto", codigo: "#000000" },
                    { id: "azul", nome: "Azul", codigo: "#3a86ff" },
                    { id: "vinho", nome: "Vinho", codigo: "#722f37" }
                ],
                imagens: [
                    "https://placehold.co/300x300/000000/ffffff?text=Legging+1",
                    "https://placehold.co/300x300/722f37/ffffff?text=Legging+2",
                    "https://placehold.co/300x300/3a86ff/ffffff?text=Legging+3"
                ],
                estoque: 25
            },
            {
                id: 5,
                nome: "Conjunto Verão",
                preco: 129.90,
                categoria: "conjunto",
                cores: [
                    { id: "azul", nome: "Azul", codigo: "#3a86ff" },
                    { id: "amarelo", nome: "Amarelo", codigo: "#ffd500" },
                    { id: "branco", nome: "Branco", codigo: "#ffffff" }
                ],
                imagens: [
                    "https://placehold.co/300x300/3a86ff/ffffff?text=Conjunto+Verão+1",
                    "https://placehold.co/300x300/ffd500/000000?text=Conjunto+Verão+2"
                ],
                estoque: 12
            },
            {
                id: 6,
                nome: "Top Cropped",
                preco: 59.90,
                categoria: "top",
                cores: [
                    { id: "preto", nome: "Preto", codigo: "#000000" },
                    { id: "rosa", nome: "Rosa", codigo: "#ff006e" },
                    { id: "verde", nome: "Verde", codigo: "#38b000" }
                ],
                imagens: [
                    "https://placehold.co/300x300/ff006e/ffffff?text=Top+Cropped+1",
                    "https://placehold.co/300x300/38b000/ffffff?text=Top+Cropped+2"
                ],
                estoque: 22
            }
        ];
        
        // ===================================================================
        // FIM DAS CONFIGURAÇÕES EDITÁVEIS - NÃO ALTERE O CÓDIGO ABAIXO
        // ===================================================================
        
        // Variáveis globais
        let carrinho = [];
        let filtroAtual = 'todos';
        const catalogoElement = document.getElementById('catalogo');
        const carrinhoItensElement = document.getElementById('carrinho-itens');
        const carrinhoTotalElement = document.getElementById('carrinho-total');
        const formularioCliente = document.getElementById('form-cliente');
        const alertaElement = document.getElementById('alerta');
        const badgeCarrinhoElement = document.getElementById('badge-carrinho');
        const etapaCatalogo = document.getElementById('etapa-catalogo');
        const etapaCarrinho = document.getElementById('etapa-carrinho');
        const botoesFiltro = document.querySelectorAll('.btn-filtro');
        
        // Função para filtrar produtos por categoria
        function filtrarProdutos(categoria) {
            filtroAtual = categoria;
            
            // Atualizar botões ativos
            botoesFiltro.forEach(btn => {
                if (btn.textContent.toLowerCase().includes(categoria) || (categoria === 'todos' && btn.textContent === 'Todos')) {
                    btn.classList.add('ativo');
                } else {
                    btn.classList.remove('ativo');
                }
            });
            
            // Renderizar produtos filtrados
            renderizarProdutos();
        }
        
        // Função para exibir alertas
        function mostrarAlerta(mensagem, tipo) {
            alertaElement.textContent = mensagem;
            alertaElement.className = 'alerta ' + tipo;
            alertaElement.style.display = 'block';
            
            alertaElement.scrollIntoView({ behavior: 'smooth' });
            
            setTimeout(() => {
                alertaElement.style.display = 'none';
            }, 5000);
        }
        
        // Função para formatar preço
        function formatarPreco(preco) {
            return preco.toFixed(2).replace('.', ',');
        }
        
        // Função para atualizar o badge do carrinho
        function atualizarBadgeCarrinho() {
            const totalItens = carrinho.reduce((total, item) => total + item.quantidade, 0);
            badgeCarrinhoElement.textContent = totalItens;
        }
        
        // Função para navegar para o carrinho
        function irParaCarrinho() {
            if (carrinho.length === 0) {
                mostrarAlerta('Adicione itens ao carrinho antes de finalizar a compra', 'erro');
                return;
            }
            
            etapaCatalogo.classList.remove('ativa');
            etapaCarrinho.classList.add('ativa');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Função para voltar para o catálogo
        function voltarParaCatalogo() {
            etapaCarrinho.classList.remove('ativa');
            etapaCatalogo.classList.add('ativa');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Função para renderizar os produtos no catálogo
        function renderizarProdutos() {
            catalogoElement.innerHTML = '';
            
            const produtosFiltrados = filtroAtual === 'todos' 
                ? produtos 
                : produtos.filter(produto => produto.categoria === filtroAtual);
            
            if (produtosFiltrados.length === 0) {
                catalogoElement.innerHTML = '<p class="carrinho-vazio">Nenhum produto encontrado nesta categoria.</p>';
                return;
            }
            
            produtosFiltrados.forEach(produto => {
                const produtoElement = document.createElement('div');
                produtoElement.className = 'produto';
                produtoElement.innerHTML = `
                    <div class="produto-imagens">
                        <img src="${produto.imagens[0]}" alt="${produto.nome}" class="produto-imagem" id="imagem-principal-${produto.id}">
                    </div>
                    <div class="produto-miniaturas">
                        ${produto.imagens.map((imagem, index) => `
                            <img src="${imagem}" alt="${produto.nome} - Vista ${index + 1}" class="miniatura ${index === 0 ? 'ativa' : ''}" 
                                 onmouseover="trocarImagem(${produto.id}, ${index})">
                        `).join('')}
                    </div>
                    <div class="produto-info">
                        <h3 class="produto-titulo">${produto.nome}</h3>
                        <p class="produto-preco">R$ ${formatarPreco(produto.preco)}</p>
                        
                        <div class="produto-cores">
                            <label>Cor:</label>
                            <div class="cores-opcoes">
                                ${produto.cores.map((cor, index) => `
                                    <div class="cor-opcao ${index === 0 ? 'selecionada' : ''}" 
                                         style="background-color: ${cor.codigo};" 
                                         title="${cor.nome}"
                                         onclick="selecionarCor(${produto.id}, '${cor.id}')"
                                         id="cor-${produto.id}-${cor.id}"></div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="quantidade-controle">
                            <button class="quantidade-btn" onclick="diminuirQuantidade(${produto.id})">-</button>
                            <input type="number" class="quantidade-input" id="quantidade-${produto.id}" value="1" min="1" max="${produto.estoque}" onchange="validarQuantidade(${produto.id})">
                            <button class="quantidade-btn" onclick="aumentarQuantidade(${produto.id})">+</button>
                        </div>
                        
                        <button class="adicionar-carrinho" onclick="adicionarAoCarrinho(${produto.id})" 
                                ${produto.estoque <= 0 ? 'disabled' : ''}>
                            ${produto.estoque <= 0 ? 'Fora de Estoque' : 'Adicionar ao Carrinho'}
                        </button>
                    </div>
                `;
                
                catalogoElement.appendChild(produtoElement);
            });
        }
        
        // Função para trocar a imagem principal do produto
        function trocarImagem(produtoId, indiceImagem) {
            const produto = produtos.find(p => p.id === produtoId);
            if (produto) {
                document.getElementById(`imagem-principal-${produtoId}`).src = produto.imagens[indiceImagem];
                
                document.querySelectorAll(`.miniatura`).forEach((miniatura, index) => {
                    if (miniatura.parentNode.parentNode.parentNode.id === `imagem-principal-${produtoId}`) {
                        if (index === indiceImagem) {
                            miniatura.classList.add('ativa');
                        } else {
                            miniatura.classList.remove('ativa');
                        }
                    }
                });
            }
        }
        
        // Função para selecionar uma cor
        function selecionarCor(produtoId, corId) {
            document.querySelectorAll(`[id^="cor-${produtoId}-"]`).forEach(corElement => {
                corElement.classList.remove('selecionada');
            });
            
            document.getElementById(`cor-${produtoId}-${corId}`).classList.add('selecionada');
        }
        
        // Função para aumentar a quantidade
        function aumentarQuantidade(produtoId) {
            const inputQuantidade = document.getElementById(`quantidade-${produtoId}`);
            const produto = produtos.find(p => p.id === produtoId);
            
            if (produto && parseInt(inputQuantidade.value) < produto.estoque) {
                inputQuantidade.value = parseInt(inputQuantidade.value) + 1;
            }
        }
        
        // Função para diminuir a quantidade
        function diminuirQuantidade(produtoId) {
            const inputQuantidade = document.getElementById(`quantidade-${produtoId}`);
            
            if (parseInt(inputQuantidade.value) > 1) {
                inputQuantidade.value = parseInt(inputQuantidade.value) - 1;
            }
        }
        
        // Função para validar a quantidade digitada
        function validarQuantidade(produtoId) {
            const inputQuantidade = document.getElementById(`quantidade-${produtoId}`);
            const produto = produtos.find(p => p.id === produtoId);
            
            if (produto) {
                if (parseInt(inputQuantidade.value) < 1) {
                    inputQuantidade.value = 1;
                } else if (parseInt(inputQuantidade.value) > produto.estoque) {
                    inputQuantidade.value = produto.estoque;
                    mostrarAlerta(`Quantidade máxima em estoque: ${produto.estoque}`, 'erro');
                }
            }
        }
        
        // Função para adicionar produto ao carrinho
        function adicionarAoCarrinho(produtoId) {
            const produto = produtos.find(p => p.id === produtoId);
            if (!produto) return;
            
            const corSelecionadaElement = document.querySelector(`[id^="cor-${produtoId}-"].selecionada`);
            if (!corSelecionadaElement) {
                mostrarAlerta('Selecione uma cor para o produto', 'erro');
                return;
            }
            
            const corId = corSelecionadaElement.id.split('-')[2];
            const cor = produto.cores.find(c => c.id === corId);
            
            const quantidade = parseInt(document.getElementById(`quantidade-${produtoId}`).value);
            
            const itemExistenteIndex = carrinho.findIndex(item => 
                item.produto.id === produtoId && item.cor.id === corId
            );
            
            if (itemExistenteIndex >= 0) {
                const novaQuantidade = carrinho[itemExistenteIndex].quantidade + quantidade;
                
                if (novaQuantidade > produto.estoque) {
                    mostrarAlerta(`Quantidade solicitada excede o estoque disponível. Máximo: ${produto.estoque}`, 'erro');
                    return;
                }
                
                carrinho[itemExistenteIndex].quantidade = novaQuantidade;
                mostrarAlerta(`Quantidade atualizada no carrinho: ${produto.nome} (${cor.nome})`, 'sucesso');
            } else {
                if (quantidade > produto.estoque) {
                    mostrarAlerta(`Quantidade solicitada excede o estoque disponível. Máximo: ${produto.estoque}`, 'erro');
                    return;
                }
                
                carrinho.push({
                    produto: produto,
                    cor: cor,
                    quantidade: quantidade
                });
                
                mostrarAlerta(`${produto.nome} (${cor.nome}) adicionado ao carrinho!`, 'sucesso');
            }
            
            atualizarCarrinho();
            document.getElementById(`quantidade-${produtoId}`).value = 1;
        }
        
        // Função para remover item do carrinho
        function removerDoCarrinho(produtoId, corId) {
            carrinho = carrinho.filter(item => 
                !(item.produto.id === produtoId && item.cor.id === corId)
            );
            
            atualizarCarrinho();
            mostrarAlerta('Item removido do carrinho', 'sucesso');
        }
        
        // Função para atualizar a exibição do carrinho
        function atualizarCarrinho() {
            if (carrinho.length === 0) {
                carrinhoItensElement.innerHTML = '<p class="carrinho-vazio">Seu carrinho está vazio</p>';
                carrinhoTotalElement.textContent = '0,00';
                atualizarBadgeCarrinho();
                return;
            }
            
            let html = '';
            let total = 0;
            
            carrinho.forEach(item => {
                const subtotal = item.produto.preco * item.quantidade;
                total += subtotal;
                
                html += `
                    <div class="carrinho-item">
                        <div>
                            <strong>${item.produto.nome}</strong> - ${item.cor.nome}
                            <br>
                            <small>Quantidade: ${item.quantidade} × R$ ${formatarPreco(item.produto.preco)}</small>
                        </div>
                        <div>
                            <strong>R$ ${formatarPreco(subtotal)}</strong>
                            <button onclick="removerDoCarrinho(${item.produto.id}, '${item.cor.id}')" style="margin-left: 10px; color: red; background: none; border: none; cursor: pointer;">✕</button>
                        </div>
                    </div>
                `;
            });
            
            carrinhoItensElement.innerHTML = html;
            carrinhoTotalElement.textContent = formatarPreco(total);
            atualizarBadgeCarrinho();
        }
        
        // Função para finalizar o pedido via WhatsApp
        function finalizarPedido(event) {
            event.preventDefault();
            
            if (carrinho.length === 0) {
                mostrarAlerta('Adicione itens ao carrinho antes de finalizar o pedido', 'erro');
                return;
            }
            
            const nome = document.getElementById('nome').value;
            const telefone = document.getElementById('telefone').value;
            const email = document.getElementById('email').value;
            const cep = document.getElementById('cep').value;
            const endereco = document.getElementById('endereco').value;
            const pagamento = document.getElementById('pagamento').value;
            
            if (!nome || !telefone || !email || !cep || !endereco || !pagamento) {
                mostrarAlerta('Preencha todos os campos do formulário', 'erro');
                return;
            }
            
            const total = carrinho.reduce((acc, item) => 
                acc + (item.produto.preco * item.quantidade), 0
            );
            
            const itensFormatados = carrinho.map(item => 
                `- ${item.quantidade}x ${item.produto.nome} (${item.cor.nome}): R$ ${formatarPreco(item.produto.preco * item.quantidade)}`
            ).join('\n');
            
            let mensagem = mensagemWhatsApp
                .replace(/{nome}/g, nome)
                .replace(/{telefone}/g, telefone)
                .replace(/{email}/g, email)
                .replace(/{endereco}/g, `${endereco} - CEP: ${cep}`)
                .replace(/{pagamento}/g, document.getElementById('pagamento').options[document.getElementById('pagamento').selectedIndex].text)
                .replace(/{total}/g, formatarPreco(total))
                .replace(/{itens}/g, itensFormatados);
            
            const mensagemCodificada = encodeURIComponent(mensagem);
            
            window.open(`https://wa.me/${whatsappNumber}?text=${mensagemCodificada}`, '_blank');
            
            mostrarAlerta('Pedido enviado com sucesso! Em breve entraremos em contato.', 'sucesso');
            
            carrinho = [];
            atualizarCarrinho();
            formularioCliente.reset();
            
            voltarParaCatalogo();
        }
        
        // ===================================================================
        // INICIALIZAÇÃO DA PÁGINA
        // ===================================================================
        
        formularioCliente.addEventListener('submit', finalizarPedido);
        
        document.addEventListener('DOMContentLoaded', function() {
            renderizarProdutos();
            atualizarBadgeCarrinho();
        });
    </script>
</body>
</html>
